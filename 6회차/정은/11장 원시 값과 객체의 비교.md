# 11장 원시 값과 객체의 비교
차이|원시 값|객체 값|
|:---:|:---:|:---:|
|변경|X|O|
|변수 할당시 메모리에|실제 값 저장|참조 값 저장|

## 11.1 원시 값
### 11.1.1 변경 불가능한 값
#### 원시 값
- 변경 불가능한 값
- 읽기 전용
- 변수 값은 재할당 가능
- `const`는 재할당이 금지된 변수일 뿐
- `const` 로 선언한 변수에 할당한 객체는 변경 가능
```javascript
const o = {};
o.a = 1;
console.log(o); // {a: 1}
```

#### 불변성
> 변수 값을 변경하기 위해 원시 값을 재할당하면, 새로운 메모리 공간을 확보하고 재할당한 값을 저장한 후, 변수가 참조하던 메모리 공간의 주소를 변경함
- 불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경할 수 있는 방법이 없음
- 데이터의 신뢰성 보장

### 11.1.2 문자열과 불변성
- 원시 값을 저장하려면 먼저 확보해야 하는 메모리 공간의 크기를 결정해야 함

 _[참고] 6.9.1 데이터 타입에 의한 메모리 공간의 확보와 참조_
- 문자열은 0개 이상의 문자로 이루어진 집합
- 자바스크립트에서는 문자열이 원시 타입 -> 변경 불가능

#### 유사 배열 객체
> 마치 배열처럼 인덱스로 프로퍼티 값에 접근할 수 있고, length 프로퍼티를 갖는 객체
- 문자열은 유사 배열 객체
- for문으로 순회 가능
- 원시열을 객체처럼 사용하면 원시 값을 감싸는 래퍼 객체로 자동 변환
_[참고] 21.3절 원시 값과 래퍼 객체_

- 배열과 유사하게 인덱스를 사용해 각 문자에 접근 가능
- 문자열은 원시값이므로 인덱스 접근해 변경 X
-> 에러는 안 남

```javascript
var str = 'string';
str[0] = 'S';
console.log(str); // string
```

### 11.1.3 값에 의한 전달
#### 값에 의한 전달(공유에 의한 전달)
- 변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수에 해당하는 원시 값이 `복사`되어 전달
	- 복사된 값은, 다른 메모리 공간에 저장된 별개의 값
	- 재할당을 통해 값을 변경하더라도 간섭 X
- 변수와 같은 식별자는 값이 아니라 메모리 주소 기억
	- 값에 의한 전달도, 사실은 값을 전달하는 게 아니라 메모리 주소를 전달함
	- 전달된 메모리 주소를 통해 메모리 공간에 접근하면 값 참조 가능

## 11.2 객체
- 프로퍼티 개수가 정해져 있지 않음
- 동적으로 추가되고 삭제 가능
- 프로퍼티의 값에도 제약이 없음
- 확보해야 할 메모리 공간의 크기를 사전에 정해둘 수 없음
- 객체는 원시값보다 비용이 많이 들음

#### 자바스크립트 객체의 관리 방식
- 자바는 클래스 기반으로 인스턴스를 생성
- 자바스크립트는 클래스가 없어 객체 생성 이후에도 동적으로 프로퍼티와 메서드 추가 가능
- 프로퍼티에 접근 위해 동적 탐색 대신 히든 클래스 사용

### 11.2.1 변경 가능한 값
- 객체 타입의 값, 즉 객체는 변경 가능한 값
- 원시 값을 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근하면 원시 값에 접근O
- 객체 값을 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근하면 참조 값에 접근O

#### 참조 값
실제로 저장된 메모리 공간의 주소가 저장된 값

```javascript
var person = {
  name: 'Lee'
};

// person 변수에 저장되어 있는 참조값으로 실제 객체에 접근해서 그 객체를 반환
// person 변수는 {name: "Lee"}를 참조하고 있다 
console.log(person); // {name: "Lee"}
```


객체는 변경 가능한 값
- 객체를 할당한 변수는재할당 없이 객체를 직접 변경 가능
- 재할당 없이 프로퍼티를 동적으로 추가, 갱신, 삭제 가능
- 여러 개의 식별자가 하나의 객체 공유 가능
 

#### 얕은 복사
- 객체를 프로퍼티 값으로 갖는 객체의 경우 한 단계까지만 복사
- 원본과는 다른 객체인데 참조 값을 복사함
- 객체를 할당한 변수를 다른 변수에 할당하는 것

#### 깊은 복사
- 객체를 프로퍼티 값으로 갖는 객체의 경우 객체에 중첩되어있는 객체까지 모두 복사
- 원시값처럼 완전한 복사본을 만듦
- 원시 값을 할당한 변수를 다른 변수에 할당하는 것

```javascript
const _ = require('lodash');
const o = { x: { y: 1 } };
const v = 1;

// 얕은 복사
const o1 = o;
const o2 = { ...o };

// 깊은 복사
const o1 = _.cloneDeep(o);
const v2 = v;
```

### 11.2.2 참조에 의한 전달
> 객체를 가리키는 변수를 다른 변수에 할당할 경우 원본의 참조 값이 얕게 복사되어 전달됨
- 두 개의 식별자가 하나의 객체를 공유
- 원본, 사본에서 객체의 프로퍼티를 변경, 추가, 삭제하면 서로 영향 주고받음

`값에 의한 전달`과 `참조에 의한 전달`
- 식별자가 기억하는 메모리 공간에 저장되어있는 값을 복사해서 전달한다는 면에서 동일
- 자바스크립트에는 참조에 의한 전달은 존재하지 않고 값에 의한 전달만 존재함
